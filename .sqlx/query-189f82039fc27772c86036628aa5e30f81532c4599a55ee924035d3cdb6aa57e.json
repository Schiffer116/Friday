{
  "db_name": "PostgreSQL",
  "query": "\n        SELECT\n            f.id,\n            ticket_price AS \"price\",\n            source_airport_id as \"src_airport\",\n            destination_airport_id as \"dst_airport\",\n            duration,\n            date_time,\n            COALESCE(booked_count, 0) as \"booked_seat!\",\n            (c.sum - COALESCE(booked_count, 0))::INT as \"empty_seat!\"\n        FROM flight f\n        LEFT JOIN (\n            SELECT\n                flight_id,\n                SUM(ticket_count)\n            FROM flight_ticket_count\n            GROUP BY flight_id\n        ) c\n        ON f.id = c.flight_id\n        LEFT JOIN (\n            SELECT\n                flight_id,\n                COUNT(flight_id)::INT AS \"booked_count\"\n            FROM ticket\n            WHERE status = 'booked'\n            GROUP BY flight_id\n        ) t\n        ON f.id = t.flight_id\n        JOIN airport a\n        ON a.status = true AND (f.source_airport_id = a.id OR f.destination_airport_id = a.id)\n        AND f.destination_airport_id = a.id\n        GROUP BY f.id, t.booked_count, c.sum\n    ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "id",
        "type_info": "Int4"
      },
      {
        "ordinal": 1,
        "name": "price",
        "type_info": "Money"
      },
      {
        "ordinal": 2,
        "name": "src_airport",
        "type_info": "Bpchar"
      },
      {
        "ordinal": 3,
        "name": "dst_airport",
        "type_info": "Bpchar"
      },
      {
        "ordinal": 4,
        "name": "duration",
        "type_info": "Interval"
      },
      {
        "ordinal": 5,
        "name": "date_time",
        "type_info": "Timestamp"
      },
      {
        "ordinal": 6,
        "name": "booked_seat!",
        "type_info": "Int4"
      },
      {
        "ordinal": 7,
        "name": "empty_seat!",
        "type_info": "Int4"
      }
    ],
    "parameters": {
      "Left": []
    },
    "nullable": [
      false,
      false,
      false,
      false,
      false,
      false,
      null,
      null
    ]
  },
  "hash": "189f82039fc27772c86036628aa5e30f81532c4599a55ee924035d3cdb6aa57e"
}
